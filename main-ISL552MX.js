import{a as rt,b as O,c as ot,d as it,e as nt,f as at,g as st,h as ut,i as S}from"./chunk-LMZY67DZ.js";import{a as dt,b as gt,c as k}from"./chunk-FGAXOGPQ.js";import{a as et,e as E,f as x,h as M,i as mt,j as ct}from"./chunk-VOK5FBSU.js";import{$c as lt,A as R,B as W,Lb as L,N as y,Nb as J,O as n,Qa as A,Qb as K,Rb as V,Sb as U,Tb as j,U as w,Vc as pt,Wb as X,_ as r,a as u,ab as D,b as d,c as B,eb as Z,l as Q,lb as q,m,n as c,pb as G,pc as Y,q as s,qc as tt,ub as g,vb as f,wb as $,y as T}from"./chunk-GZRSXBDL.js";var vt={path:"",data:{title:"Main menu",backToMainPage:!1},loadComponent:()=>import("./chunk-QZAGD6PO.js").then(t=>t.HomeComponent)},Ct={path:"add-phrase",data:{title:"Add phrase",backToMainPage:!0},loadComponent:()=>import("./chunk-HJNVXKPS.js").then(t=>t.AddPhraseComponent)},bt={path:"training",data:{title:"Tranining",backToMainPage:!0},loadComponent:()=>import("./chunk-LIV5TU7D.js").then(t=>t.TrainingComponent)},Tt={path:"repeat",data:{title:"Repeat",backToMainPage:!0},loadComponent:()=>import("./chunk-LIV5TU7D.js").then(t=>t.TrainingComponent)},ft=[vt,Ct,bt,Tt];var St={providers:[X({eventCoalescing:!0}),at(ft)]};var h=class t{uidService=r(mt);generateNewUid(e){return this.uidService.generateUid()}loadSingleDocument(e){return c(()=>new E(`path ${e} is not recognized`))}loadDocuments(e,o){return e==="trainings/test-user/phrases"?m(Rt.map(b=>{var i=b,{uid:p}=i,v=B(i,["uid"]);return{uid:p,data:v}})):c(()=>new E(`path ${e} is not recognized`))}static \u0275fac=function(o){return new(o||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})},Rt=[{uid:"hello",mode:"training",attempts:0,resultOk:0,resultPartial:0,resultFail:0,last:new Date().toISOString()},{uid:"hi",mode:"training",attempts:0,resultOk:0,resultPartial:0,resultFail:0,last:new Date().toISOString()},{uid:"all hands on deck",mode:"training",attempts:0,resultOk:0,resultPartial:0,resultFail:0,last:new Date().toISOString()},{uid:"there is a bus now",mode:"memo",attempts:0,resultOk:0,resultPartial:0,resultFail:0,last:new Date().toISOString()},{uid:"source code is unreadable",mode:"memo",attempts:0,resultOk:0,resultPartial:0,resultFail:0,last:new Date().toISOString()},{uid:"ok",mode:"recall",attempts:0,resultOk:0,resultPartial:0,resultFail:0,last:new Date().toISOString()},{uid:"that thought has crossed my mind",mode:"recall",attempts:0,resultOk:0,resultPartial:0,resultFail:0,last:new Date().toISOString()},{uid:"no clue",mode:"recall",attempts:0,resultOk:0,resultPartial:0,resultFail:0,last:new Date().toISOString()}];var P=class t extends ct{constructor(){super("UserState",{userUid:"test-user"})}userUid$=this.state$.pipe(s(e=>e.userUid));static \u0275fac=function(o){return new(o||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})};var yt=(t,{configuration:e})=>d(u({},t),{configuration:e}),ht=M(()=>{let t=r(k),e=r(h),o=r(S),p=r(P),v=o.createReducer(yt);return()=>t.registerProcess({processName:"trainingConfigurationLoadProcess"},b=>b.pipe(n(()=>p.userUid$),n(i=>i!==null?m(i):c(()=>new N)),n(i=>e.loadSingleDocument(`trainings/${i}`).pipe(R(a=>m({uid:i,data:null})))),s(({uid:i,data:a})=>({setSize:a?.setSize??10,last:a?.last!=null?new Date(a.last):null})),n(i=>v({configuration:i}))))}),N=class extends x{constructor(){super("trainingConfigurationLoadProcess","no user")}};var wt=(t,{phraseUid:e,trainingPhraseStat:o})=>d(u({},t),{phrases:d(u({},t.phrases),{[o.mode]:d(u({},t.phrases[o.mode]),{[e]:o})})}),Pt=M(()=>{let t=r(k),e=r(h),o=r(S),p=r(P),v=o.createReducer(wt);return()=>t.registerProcess({processName:"trainingSetLoadProcess"},b=>b.pipe(n(()=>p.userUid$),n(i=>i!==null?m(i):c(()=>new _)),n(i=>e.loadDocuments(`trainings/${i}/phrases`).pipe(R(()=>m([])))),n(i=>Q(i).pipe(s(({uid:a,data:l})=>{let z=ut(l.mode);return z===null?null:{phraseUid:a,trainingPhraseStat:{mode:z,attempts:l.attempts,resultOk:l.resultOk,resultPartial:l.resultPartial,resultFail:l.resultFail,last:new Date(l.last)}}}),T(a=>a!==null),n(({phraseUid:a,trainingPhraseStat:l})=>v({phraseUid:a,trainingPhraseStat:l})),W()))))}),_=class extends x{constructor(){super("trainingSetLoadProcess","no user")}};var Ot=()=>["/"];function xt(t,e){t&1&&(g(0,"button",1)(1,"mat-icon"),L(2,"arrow_back"),f()()),t&2&&q("routerLink",V(1,Ot))}var I=class t{activatedRoute=r(O);router=r(it);currentRouteData$=this.router.events.pipe(T(e=>e instanceof rt),s(()=>{let e=this.activatedRoute.root;for(;e.firstChild;)e=e.firstChild;return e.snapshot.data}),y(null));title$=this.currentRouteData$.pipe(s(e=>e!==null?e.title:""),y(""));backToMainPage$=this.currentRouteData$.pipe(s(e=>e!==null?e.backToMainPage:!1),y(!1));static \u0275fac=function(o){return new(o||t)};static \u0275cmp=D({type:t,selectors:[["app-page-header"]],decls:6,vars:6,consts:[[1,"back-button"],["mat-icon-button","",3,"routerLink"]],template:function(o,p){o&1&&(g(0,"div",0),Z(1,xt,3,2,"button",1),U(2,"async"),f(),g(3,"h3"),L(4),U(5,"async"),f()),o&2&&(A(),G(j(2,2,p.backToMainPage$)?1:-1),A(3),J(" ",j(5,4,p.title$),`
`))},dependencies:[lt,pt,tt,Y,gt,dt,st,nt],styles:["[_nghost-%COMP%]{margin:.5rem;display:flex;flex-direction:row;align-items:center;gap:.5rem}.back-button[_ngcontent-%COMP%]{width:2rem}h3[_ngcontent-%COMP%]{margin:.5rem 0}"]})};var C=class{activatedRoute=r(O);constructor(){console.log("AppService initialized",this.activatedRoute)}};var F=class t{trainingState=r(S);loadConfiguration=r(ht);trainingSetLoad=r(Pt);appService=r(C);ngOnInit(){this.loadConfiguration().pipe(n(()=>this.trainingSetLoad())).subscribe()}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=D({type:t,selectors:[["app-root"]],features:[K([C])],decls:3,vars:0,consts:[[1,"content"]],template:function(o,p){o&1&&($(0,"app-page-header"),g(1,"div",0),$(2,"router-outlet"),f())},dependencies:[ot,I],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]{overflow:hidden;flex-grow:1}"]})};et(F,St).catch(t=>console.error(t));
